module bufferc_tests {

	int test_allocs(){
		int error_count;
		
		buffer a = create(5);
		if (a.length() != 5) {
		}
		buffer b;
		
		return error_count;
	}
	int test_bufferlength() {
		int error_count = 0;
		
		buffer a = create(5);
		buffer b;
		buffer c = create(5);
		buffer d;
		int res;
		a = "12345";
		print(a);
		b = "";
		print(b);
		printf();
		// Buffer a, size 5, length 5
		res = a.length;
		// res should be 5.	
		
		// Buffer b, size 0, length 0
		res = b.length;
		// res should be 0.
		
		// Buffer c, size 5, length 0
		res = c.length;
		// res should be 0.
		
		// Buffer d, uninitialized. Shouldn't work.
		res = d.length;
		return error_count;		
	}
	
	int main()
	{
		int error_count = 0;
		
		//Run TEST 1
		error_count = error_count + test_bufferlength();
		//Run TEST 2
			
		//Report error count
		buffer succ = create(8);
		succ = "SUCCESS!"; 
		if (error_count == 0) print(succ);
		
	}
}